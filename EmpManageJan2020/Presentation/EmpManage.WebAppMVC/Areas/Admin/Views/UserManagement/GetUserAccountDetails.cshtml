@model EmpManage.WebAppMVC.Areas.Admin.Models.UserManagement.DTOs.UserAccountDetailsDTO

@{
    ViewData["Title"] = @Model.UserDetails.UserName + " - User Details";

    Layout = "~/Views/Shared/_Layout.cshtml";

}

@await Html.PartialAsync("_UserAccountDetails", @Model.UserDetails)

<div class="card mt-3">
    <div class="card-header lead blockquote">
        <strong>User Incorrect Login Logs</strong>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table id="tblUserIncorrectLoggingLogs" class="table table-striped table-bordered table-hover" style="width:100%">
                <thead class="lead blockquote ">
                    <tr class="">
                        <th>Id</th>
                        <th>User Id</th>
                        <th>InCorrect Loggin Count</th>
                        <th>Logging Ip Address</th>
                        <th>Logging Browser</th>
                        <th>IsUserAuthenticated</th>
                        <th>IsActive</th>
                        <th>Created On</th>
                        <th>Created By</th>
                        <th>Created By UserName</th>
                        <th>Modified On</th>
                        <th>Modified By</th>
                        <th>Modified By UserName</th>
                    </tr>
                </thead>
                <tbody class="blockquote ">
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header lead blockquote">
        <strong>User Login Logs</strong>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table id="tblUserLoggingLogs" class="table table-striped table-bordered table-hover" style="width:100%">
                <thead class="lead blockquote ">
                    <tr class="">
                        <th>Id</th>
                        <th>User Id</th>
                        <th>Logging Ip Address</th>
                        <th>Logging Browser</th>
                        <th>Created On</th>
                        <th>Created By</th>
                        <th>Created By UserName</th>
                        <th>Modified On</th>
                        <th>Modified By</th>
                        <th>Modified By UserName</th>
                    </tr>
                </thead>
                <tbody class="blockquote ">
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="~/jsControllers/Admin/userManagementController.js"></script>

<script>
    $(window).on("load", function () {

        var userLoggingLogs =  @Html.Raw(Json.Serialize(@Model.UserLoggingLogs));
        var userInCorrectLoggingLogs =  @Html.Raw(Json.Serialize(@Model.UserInCorrectAuthLogs));

         $('#tblUserIncorrectLoggingLogs').DataTable({
            "bLengthChange": false,
            "order": [],
            data :userInCorrectLoggingLogs,
            "columns": [
                       { "data": "UserInCorrectAuthLogId", "autowidth": true },
                        { "data": "UserId", "autowidth": true },
                       { "data": "InCorrectLoggingCount", "autowidth": true },

                       { "data": "LoggingIpAddress", "autowidth": true },
                         { "data": "LoggingBrowser", "autowidth": true },

                       { "data": "IsUserAuthenticated", "autowidth": true },
                       { "data": "IsActive", "autowidth": true },
                        {
                           "data": "CreatedOn",
                           "type": "date ",
                           "render": function (data) {
                               return moment(data).format('lll');
                            }
                },
                       { "data": "CreatedBy", "autowidth": true },
                       { "data": "CreatedByUserName", "autowidth": true },
                        {
                           "data": "ModifiedOn",
                           "type": "date ",
                           "render": function (data) {
                               return moment(data).format('lll');
                            }
                        },
                       { "data": "ModifiedBy", "autowidth": true },
                       { "data": "ModifiedByUserName", "autowidth": true },
           ]
         });

        $('#tblUserLoggingLogs').DataTable({
            "bLengthChange": false,
            "order": [],
            data :userLoggingLogs,
            "columns": [
                       { "data": "UserLoggingLogId", "autowidth": true },
                       { "data": "UserId", "autowidth": true },
                       { "data": "LoggingIpAddress", "autowidth": true },
                { "data": "LoggingBrowser", "autowidth": true },
                       {
                           "data": "CreatedOn",
                           "type": "date ",
                           "render": function (data) {
                               return moment(data).format('lll');
                            }
                        },
                       { "data": "CreatedBy", "autowidth": true },
                       { "data": "CreatedByUserName", "autowidth": true },
                        {
                           "data": "ModifiedOn",
                           "type": "date ",
                           "render": function (data) {
                               return moment(data).format('lll');
                            }
                        },
                       { "data": "ModifiedBy", "autowidth": true },
                       { "data": "ModifiedByUserName", "autowidth": true },
           ]
        });

        sharedController.navActiveColorChange("nav-item-Admin");
        sharedController.hideLoadingIndicator();

    });
</script>